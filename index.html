<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Album K·ª∑ Ni·ªám Premium B√© Khanh L√¥</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Quicksand:wght@500;700&display=swap');
        
        :root {
            --neon-pink: #ff007f;
            --neon-blue: #00f2ff;
            --neon-green: #2aff99;
            --neon-purple: #ae00ff;
            --galaxy-dark: #090b1c;
        }

        body { 
            font-family: 'Quicksand', sans-serif;
            background-image: url('images/galaxy-background.jpg'); 
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(3px);
            z-index: -1;
        }

        h1 {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(to right, var(--neon-blue), white, var(--neon-pink));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 10px var(--neon-blue));
            text-align: center;
            font-weight: 900;
            animation: titleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            from { filter: drop-shadow(0 0 10px var(--neon-blue)); }
            to { filter: drop-shadow(0 0 20px var(--neon-pink)); }
        }

        .btn-galaxy {
            position: relative;
            overflow: hidden;
            padding: 2px;
            border-radius: 50px;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .btn-galaxy::before {
            content: '';
            position: absolute;
            top: -100%; left: -100%; width: 300%; height: 300%;
            background: conic-gradient(transparent, var(--neon-blue), transparent, var(--neon-pink), transparent, var(--neon-green), transparent);
            animation: rotateRGB 3s linear infinite;
        }

        .btn-galaxy-inner {
            position: relative;
            z-index: 1;
            background: var(--galaxy-dark);
            color: white;
            padding: 0.6rem 1.8rem;
            border-radius: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 11px;
            white-space: nowrap;
        }

        @keyframes rotateRGB {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .friend-card {
            background: rgba(15, 20, 40, 0.6);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .friend-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0, 242, 255, 0.3);
        }

        .friend-card::before {
            content: '';
            position: absolute;
            top: -100%; left: -100%; width: 300%; height: 300%;
            background: conic-gradient(transparent 20%, var(--neon-blue), var(--neon-green), var(--neon-pink), var(--neon-purple), transparent 80%);
            animation: rotateRGB 6s linear infinite;
            opacity: 0.2;
        }

        .card-content {
            position: relative;
            z-index: 1;
            background: rgba(15, 20, 40, 0.85);
            padding: 2rem 1rem;
            border-radius: inherit;
            height: 100%;
        }

        .avatar-frame {
            width: 80px; height: 80px;
            border-radius: 50%;
            padding: 3px;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-pink), var(--neon-green));
            margin: 0 auto 1rem;
        }

        .avatar-img {
            width: 100%; height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--galaxy-dark);
        }

        /* --- LIGHTBOX CSS --- */
        #lightbox {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        #lightbox img {
            max-width: 100%;
            max-height: 85vh;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            border: 2px solid rgba(255,255,255,0.1);
        }
    </style>
</head>
<body class="py-12 px-6">

    <div id="lightbox" onclick="closeLightbox()">
        <div class="absolute top-5 right-5 z-50">
            <button class="btn-galaxy">
                <span class="btn-galaxy-inner text-xl">‚úï</span>
            </button>
        </div>
        <div class="relative flex flex-col items-center" onclick="event.stopPropagation()">
            <img id="lightbox-img" src="" alt="Zoomed view">
            <p class="mt-4 text-pink-400 font-bold tracking-widest text-sm">NH·∫§N GI·ªÆ ƒê·ªÇ L∆ØU ·∫¢NH ƒê·ªêI V·ªöI iOS/Android.Chu·ªôt ph·∫£i r·ªìi b·∫•m "l∆∞u h√¨nh ·∫£nh th√†nh..." ƒë·ªëi v·ªõi Window/MacOS</p>
        </div>
    </div>

    <div class="max-w-6xl mx-auto">
        <div id="main-header" class="mb-16">
            <h1>ALBUM K·ª∂ NI·ªÜM(Designed by Khanh LE)</h1>
            <p class="text-center text-blue-300 tracking-[0.3em] font-bold uppercase opacity-60 mt-4 text-xs">V≈© tr·ª• c·ªßa ch√∫ng ta ‚Ä¢ 2026.Back-end,resources by Gemini</p>
        </div>

        <div id="friend-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"></div>

        <div id="gallery-section" class="hidden">
            <div class="flex flex-col md:flex-row justify-between items-center mb-10 gap-6">
                <button onclick="hideGallery()" class="btn-galaxy">
                    <span class="btn-galaxy-inner">‚Üê QUAY L·∫†I</span>
                </button>
                <div class="text-center md:text-right">
                    <h3 id="friend-name-title" class="text-3xl font-black"></h3>
                    <p id="friend-bday-gallery" class="text-pink-400 font-bold uppercase tracking-widest text-xs"></p>
                </div>
            </div>
            <div id="images-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 bg-white/5 p-4 rounded-[30px] border border-white/10"></div>
        </div>
    </div>

    <script>
        const friends = [
            { id: "nam-anh", name: "ƒê√†o Nam Anh", nick: "AbuTV", bio: "08/12/2009", avatar: "images/avatar-nam-anh.jpg", imgCount: 35 },
            { id: "minh-dang", name: "Nguy·ªÖn ƒê·ª©c Minh ƒêƒÉng", nick: "A ch√≠", bio: "05/03/2009", avatar: "images/avatar-minh-dang.jpg", imgCount: 5 },
            { id: "tuyet-mai", name: "Nguy·ªÖn Thanh Tuy·∫øt Mai", nick: "Mai loz", bio: "02/11/2009", avatar: "images/avatar-tuyet-mai.jpg", imgCount: 2 },
            { id: "the-anh", name: "L∆∞∆°ng V≈© Th·∫ø Anh", nick: "Wabu Ubin", bio: "01/01/1970", avatar: "images/avatar-the-anh.jpg", imgCount: 1 },
            { id: "ngoc-minh", name: "ƒêo√†n Ng·ªçc Minh", nick: "Abc", bio: "xx/08/2009", avatar: "images/avatar-ngoc-minh.jpg", imgCount: 3 },
            { id: "ha-thanh", name: "Ph·∫°m Th·ªã H√† Thanh", nick: "ehthanh", bio: "01/01/1880", avatar: "images/avatar-ha-thanh.jpg", imgCount: 6 }
        ];

        function renderFriendList() {
            const list = document.getElementById('friend-list');
            list.innerHTML = '';
            friends.forEach(f => {
                list.innerHTML += `
                    <div onclick="showGallery('${f.id}')" class="friend-card text-center">
                        <div class="card-content">
                            <div class="avatar-frame">
                                <img src="${f.avatar}" class="avatar-img" onerror="this.src='https://via.placeholder.com/80?text=${f.name.charAt(0)}'">
                            </div>
                            <h2 class="text-lg font-bold mb-1">${f.name}</h2>
                            <p class="text-blue-400 font-bold text-[10px] uppercase mb-3">${f.nick}</p>
                            <div class="bg-pink-500/10 border border-pink-500/30 rounded-full px-4 py-1 inline-block text-[9px] text-pink-300 font-bold">
                                üéÇ ${f.bio}
                            </div>
                        </div>
                    </div>`;
            });
        }

        function showGallery(id, scroll = true) {
            const friend = friends.find(f => f.id === id);
            if(!friend) return;

            // C·∫≠p nh·∫≠t URL Hash khi v√†o album
            window.location.hash = `/${id}`;

            document.getElementById('friend-list').classList.add('hidden');
            document.getElementById('main-header').classList.add('hidden');
            document.getElementById('gallery-section').classList.remove('hidden');
            
            document.getElementById('friend-name-title').innerText = friend.name;
            document.getElementById('friend-bday-gallery').innerText = friend.nick + " ‚Ä¢ " + friend.bio;
            
            const grid = document.getElementById('images-grid');
            grid.innerHTML = ''; 
            
            for (let i = 1; i <= friend.imgCount; i++) {
                const imgPath = `images/${friend.id}-${i}.jpg`;
                grid.innerHTML += `
                    <div class="group relative overflow-hidden rounded-xl aspect-[3/4] bg-black border border-white/10">
                        <img src="${imgPath}" loading="lazy" class="w-full h-full object-cover opacity-80" onerror="this.src='https://via.placeholder.com/300x400?text=Galaxy'">
                        <div class="absolute inset-0 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition bg-black/60 backdrop-blur-[2px]">
                            <button onclick="openLightbox('${id}', ${i}, '${imgPath}')" class="btn-galaxy scale-75">
                                <span class="btn-galaxy-inner">PH√ìNG TO ·∫¢NH</span>
                            </button>
                        </div>
                    </div>`;
            }
            if(scroll) window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function hideGallery() {
            window.location.hash = ''; // X√≥a hash quay v·ªÅ trang ch·ªß
            document.getElementById('friend-list').classList.remove('hidden');
            document.getElementById('main-header').classList.remove('hidden');
            document.getElementById('gallery-section').classList.add('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // LIGHTBOX & ROUTING LOGIC
        function openLightbox(friendId, imgIndex, imgPath) {
            const lightbox = document.getElementById('lightbox');
            const img = document.getElementById('lightbox-img');
            img.src = imgPath;
            lightbox.style.display = 'flex';
            document.body.style.overflow = 'hidden'; // Kh√≥a cu·ªôn trang
            
            // C·∫≠p nh·∫≠t URL Hash khi m·ªü ·∫£nh
            window.location.hash = `/${friendId}/${imgIndex}`;
        }

        function closeLightbox() {
            const lightbox = document.getElementById('lightbox');
            lightbox.style.display = 'none';
            document.body.style.overflow = 'auto'; // M·ªü l·∫°i cu·ªôn trang
            
            // Quay l·∫°i hash c·ªßa album (x√≥a s·ªë ·∫£nh)
            const currentHash = window.location.hash.split('/');
            if (currentHash.length > 2) {
                window.location.hash = `/${currentHash[1]}`;
            }
        }

        // X·ª¨ L√ù N√öT BACK V√Ä ƒêI·ªÄU H∆Ø·ªöNG B·∫∞NG HASH
        window.addEventListener('hashchange', () => {
            const hash = window.location.hash.replace('#/', '');
            const parts = hash.split('/');

            if (!hash) {
                hideGallery();
                closeLightbox();
            } else if (parts.length === 1) {
                closeLightbox();
                showGallery(parts[0], false);
            } else if (parts.length === 2) {
                const imgPath = `images/${parts[0]}-${parts[1]}.jpg`;
                openLightbox(parts[0], parts[1], imgPath);
            }
        });

        // Ki·ªÉm tra hash khi v·ª´a t·∫£i trang (Deep Linking)
        window.addEventListener('load', () => {
            if (window.location.hash) {
                window.dispatchEvent(new HashChangeEvent('hashchange'));
            }
        });

        renderFriendList();
    </script>
</body>
</html>